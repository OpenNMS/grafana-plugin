{"version":3,"sources":["../../../src/datasources/perf-ds/modal_ctrl.js"],"names":["ModalCtrl","$scope","query","selectedRow","searchForRows","self","searching","search","then","results","rows","count","totalCount","index","row","result","reject","dismiss","resolve","angular","module","controller"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAMA,e;AACJ,2BAAYC,MAAZ,EAAoB;AAAA;;AAClB,eAAKA,MAAL,GAAcA,MAAd;AACA,eAAKC,KAAL,GAAa,EAAb;AACA,eAAKC,WAAL,GAAmB,IAAnB;;AAEA,eAAKC,aAAL;AACD;;;;0CAEe;AACd,gBAAIC,OAAO,IAAX;AACA,iBAAKC,SAAL,GAAiB,IAAjB;AACA,iBAAKL,MAAL,CAAYM,MAAZ,CAAmB,KAAKL,KAAxB,EACGM,IADH,CACQ,UAAUC,OAAV,EAAmB;AACvB;AACAJ,mBAAKF,WAAL,GAAmB,IAAnB;AACA;AACAE,mBAAKK,IAAL,GAAYD,QAAQC,IAApB;AACAL,mBAAKM,KAAL,GAAaF,QAAQE,KAArB;AACAN,mBAAKO,UAAL,GAAkBH,QAAQG,UAA1B;AACA;AACAP,mBAAKC,SAAL,GAAiB,KAAjB;AACD,aAVH,EAUK,YAAY;AACbD,mBAAKC,SAAL,GAAiB,KAAjB;AACD,aAZH;AAaD;;;wCAEaO,K,EAAO;AACnB,gBAAI,KAAKV,WAAL,KAAqBU,KAAzB,EAAgC;AAC9B,mBAAKV,WAAL,GAAmB,IAAnB;AACD,aAFD,MAEO;AACL,mBAAKA,WAAL,GAAmBU,KAAnB;AACA;AACA,mBAAKC,GAAL,GAAW,KAAKJ,IAAL,CAAU,KAAKP,WAAf,CAAX;AACD;AACF;;;mCAEQ;AACP,iBAAKF,MAAL,CAAYc,MAAZ,CAAmBC,MAAnB;AACA,iBAAKf,MAAL,CAAYgB,OAAZ;AACD;;;+BAEI;AACH,gBAAI,KAAKd,WAAL,KAAqB,IAAzB,EAA+B;AAC7B,mBAAKF,MAAL,CAAYc,MAAZ,CAAmBG,OAAnB,CAA2B,KAAKJ,GAAhC;AACD,aAFD,MAEO;AACL,mBAAKb,MAAL,CAAYc,MAAZ,CAAmBC,MAAnB;AACD;AACD,iBAAKf,MAAL,CAAYgB,OAAZ;AACD;;;;;;AAGH,UAAI,OAAOE,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,gBAAQC,MAAR,CAAe,qBAAf,EACGC,UADH,CACc,2BADd,EAC2CrB,SAD3C;AAED","file":"modal_ctrl.js","sourcesContent":["class ModalCtrl {\n  constructor($scope) {\n    this.$scope = $scope;\n    this.query = \"\";\n    this.selectedRow = null;\n\n    this.searchForRows();\n  }\n\n  searchForRows() {\n    var self = this;\n    this.searching = true;\n    this.$scope.search(this.query)\n      .then(function (results) {\n        // Reset the selected row\n        self.selectedRow = null;\n        // Add the results to the scope\n        self.rows = results.rows;\n        self.count = results.count;\n        self.totalCount = results.totalCount;\n        // We're done\n        self.searching = false;\n      }, function () {\n        self.searching = false;\n      });\n  }\n\n  setClickedRow(index) {\n    if (this.selectedRow === index) {\n      this.selectedRow = null;\n    } else {\n      this.selectedRow = index;\n      // Keep a reference to the row when the selection is made\n      this.row = this.rows[this.selectedRow];\n    }\n  }\n\n  cancel() {\n    this.$scope.result.reject();\n    this.$scope.dismiss();\n  }\n\n  ok() {\n    if (this.selectedRow !== null) {\n      this.$scope.result.resolve(this.row);\n    } else {\n      this.$scope.result.reject();\n    }\n    this.$scope.dismiss();\n  }\n}\n\nif (typeof angular !== 'undefined') {\n  angular.module('grafana.controllers')\n    .controller('OpenNMSModalSelectionCtrl', ModalCtrl);\n}\n"]}